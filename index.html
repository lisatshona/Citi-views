<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cape Town Projects Map with Legend</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    
        <link rel="stylesheet" href="style.css">

</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container-fluid">
            <!-- Logo -->
            <a class="navbar-brand" href="index.html">
                <img src="images/Logo_of_Cape_Town,_South_Africa.svg.png" alt="Your Logo" height="30">
            </a>

            <!-- Navbar links -->
            <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <!-- Search bar -->
                    <li class="nav-item">
                        <form class="d-flex">
                            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                            <button class="btn btn-outline-success" type="submit">Search</button>
                        </form>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" id="registerButton" href="#">Register</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="loginButton">Login</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="form-popup hidden" id="loginFormContainer">
        <form id="loginForm" class="form">
            <h2>Login</h2>
            <input type="email" id="loginEmail" placeholder="Email" required>
            <input type="password" id="loginPassword" placeholder="Password" required>
            <button type="submit">Login</button>
            <button type="button" class="close-button" id="closeLoginForm">Close</button>
        </form>
    </div>


    <div class="form-popup hidden" id="registerFormContainer">
        <form id="registerForm" class="form">
            <h2>Register</h2>
            <input type="text" id="registerUsername" placeholder="Username" required>
            <input type="email" id="registerEmail" placeholder="Email" required>
            <input type="password" id="registerPassword" placeholder="Password" required>
            <button type="submit">Register</button>
            <button type="button" class="close-button" id="closeRegisterForm">Close</button>
        </form>
    </div>




    <section class="welcome-section">
        <div class="welcome-content">
            <h1>CITY BUILDER</h1>
            <p>Welcome to CityBuilder, the ultimate e-public participation platform designed to bring community
                involvement to your fingertips. Our innovative platform features an interactive map, allowing you to
                click on any area and instantly view the ongoing projects and initiatives in that location. Whether
                you're interested in local infrastructure developments, environmental conservation efforts, or community
                events, CityBuilder provides detailed information and real-time updates. Empower yourself with
                knowledge, contribute your voice, and stay connected with the projects shaping your neighborhood. Join
                us in transforming civic engagement and making a positive impact in your community.
            </p>
        </div>
    </section>

    <div class="information-filters">
        <button class="btn btn-primary">Filter 1</button>
        <button class="btn btn-secondary">Filter 2</button>
        <button class="btn btn-success">Filter 3</button>
        <button class="btn btn-danger">Filter 4</button>
        <button class="btn btn-warning">Filter 5</button>
    </div>

    <div class="row">
        <div class="col-3">

            <div id="projects">
                <h2>Upcoming Projects</h2>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: green;"></div> Project C
                    </div>
                    <!-- Add more legend items for additional projects -->
                </div>
            </div>



        </div>
        <div class="col-7">
            <div id="map"></div>
        </div>
        <div class="col-2 legend">

            <h2>Legend</h2>
            <div class="legend-item">
                <span class="legend-color" style="background-color: red;"></span> Project A
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: blue;"></span> Project B
            </div>
            <!-- Add more legend items for additional projects -->

        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const loginButton = document.getElementById('loginButton');
            const registerButton = document.getElementById('registerButton');
            const loginFormContainer = document.getElementById('loginFormContainer');
            const registerFormContainer = document.getElementById('registerFormContainer');
            const closeLoginForm = document.getElementById('closeLoginForm');
            const closeRegisterForm = document.getElementById('closeRegisterForm');

            loginButton.addEventListener('click', () => {
                loginFormContainer.classList.remove('hidden');
            });

            registerButton.addEventListener('click', () => {
                registerFormContainer.classList.remove('hidden');
                document.body.style.backgroundColor = 'white';
            });

            closeLoginForm.addEventListener('click', () => {
                loginFormContainer.classList.add('hidden');
            });

            closeRegisterForm.addEventListener('click', () => {
                registerFormContainer.classList.add('hidden');
            });

            const loginForm = document.getElementById('loginForm');
            loginForm.addEventListener('submit', (event) => {
                event.preventDefault();

                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;

                if (validateEmail(email) && validatePassword(password)) {
                    // Perform login action, e.g., send data to the server
                    alert('Login successful!');
                    loginFormContainer.classList.add('hidden');
                } else {
                    alert('Please enter valid email and password.');
                }
            });

            const registerForm = document.getElementById('registerForm');
            registerForm.addEventListener('submit', (event) => {
                event.preventDefault();

                const username = document.getElementById('registerUsername').value;
                const email = document.getElementById('registerEmail').value;
                const password = document.getElementById('registerPassword').value;

                if (validateUsername(username) && validateEmail(email) && validatePassword(password)) {
                    // Perform registration action, e.g., send data to the server
                    alert('Registration successful!');
                    registerFormContainer.classList.add('hidden');
                } else {
                    alert('Please enter valid username, email, and password.');
                }
            });

            function validateUsername(username) {
                return username.trim().length >= 3;
            }

            function validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(String(email).toLowerCase());
            }

            function validatePassword(password) {
                return password.length >= 6;
            }
        });



        var projects = [
            {
                name: "Project B",
                location: [-33.9249, 18.5875], // Another location in Cape Town
                description: "Description of Project B. This project focuses on promoting sustainable tourism in the area."
            },
            {
                name: "Project A",
                location: [-33.9349, 18.4241], // Cape Town coordinates
                description: "Description of Project A. This project aims to improve water access in the community."
            }

            // Add more projects as needed
        ];

        var map = L.map('map').setView([-33.9249, 18.4241], 12); // Centered at Cape Town

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Add pins for each project
        projects.forEach(function (project) {
            var pinIcon = L.icon({
                iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',
                iconSize: [25, 41],
                iconAnchor: [12, 41],
                popupAnchor: [1, -34],
                shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',
                shadowSize: [41, 41],
                shadowAnchor: [12, 41]
            });

            var marker = L.marker(project.location, { icon: pinIcon }).addTo(map);
            marker.bindPopup("<b>" + project.name + "</b><br>" + project.description + "<button>Read</button>").openPopup();
        });
    </script>

</body>

</html>